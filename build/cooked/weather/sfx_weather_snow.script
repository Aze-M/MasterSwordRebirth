{[shared]if ( NO_SNOW == 1 ) deletemeconst WEATHER_SPRITE snow1.sprconst SPRITE_BREATH char_breath.sprconst SOUND_AMB ambwind.wavconst SML_RADIUS_FREQ 1const MED_RADIUS_FREQ 1const LGE_RADIUS_FREQ 1setvarg IS_SNOWING 1}{[server] precache WEATHER_SPRITE precache SPRITE_BREATH}#include weathersfx_weather_base{ [client] weather_startsetcallback render enableif WEATHER_TYPE equals snow callevent rain_loopsound}{ [client] rain_loopsoundif WEATHER_TYPE equals snowrepeatdelay 7 playsound WEATHER_CHANNEL const.snd.maxvol SOUND_AMB}{[client] create_particleif WEATHER_TYPE equals snow cleffect tempent sprite WEATHER_SPRITE PARAM1 setup_snowflake}{[client] setup_snowflake cleffect tempent set_current_prop death_delay 10 cleffect tempent set_current_prop bouncefactor 0 cleffect tempent set_current_prop scale $randf(0.2,0.3) cleffect tempent set_current_prop velocity.z-100 cleffect tempent set_current_prop gravity $randf(0.1,0.3) cleffect tempent set_current_prop collide all;die}{ [client] weather_setenvif WEATHER_TYPE equals snowsetenv fog.enabled1setenv fog.density0.4setenv fog.start64setenv fog.end2048setenv fog.typelinearsetenv fog.color(1,1,1)}{[client] game_renderif WEATHER_TYPE equals snowif $getcl(PARAM1,isplayer)if !$rand(0,60)local l.pos $getcl(PARAM1,origin)vectoradd l.pos $relpos($getcl(PARAM1,angles),$vec(0,8,32))cleffect tempent sprite SPRITE_BREATH l.pos setup_sprite_breath}{[client] setup_sprite_breathcleffect tempent set_current_prop death_delay last_framecleffect tempent set_current_prop framerate30cleffect tempent set_current_prop frames30cleffect tempent set_current_prop scale 0.1cleffect tempent set_current_prop gravity -0.01cleffect tempent set_current_prop collide nonecleffect tempent set_current_prop rendermode addcleffect tempent set_current_prop renderamt 30}