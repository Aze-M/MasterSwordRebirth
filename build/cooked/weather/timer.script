{game_spawn setvarg THIS_HOUR PARAM1 -1 setvarg LAST_HOUR PARAM1 0}{ game_playerspawncallevent worldevent_time}{ worldevent_time setvarg THIS_HOUR PARAM1 if ( THIS_HOUR != LAST_HOUR ) {if ( ALWAYS_DAY == 1 ) { setvarg global.map.allownight 0setvarg global.mstime.secs 215940setvarg global.mstime.updateall 0usetrigger hour_countersetvarg LAST_HOUR THIS_HOUR}if ( ALWAYS_DUSK == 1 ) {setvarg global.mstime.secs 147550setvarg global.mstime.updateall 0usetrigger hour_countersetvarg LAST_HOUR THIS_HOUR}if ( ALWAYS_NIGHT == 1 ) {setvarg global.mstime.secs 169120setvarg global.mstime.updateall 0usetrigger hour_countersetvarg LAST_HOUR THIS_HOUR}if ( NO_WEATHER = 1 ) {callexternal all weathersv_weather_control global_stop_weather} } if ( THIS_HOUR != LAST_HOUR ) { if ( THIS_HOUR == 0 ) usetrigger hour_0 if ( THIS_HOUR == 1 ) usetrigger hour_1if ( THIS_HOUR == 2 ) usetrigger hour_2if ( THIS_HOUR == 3 ) usetrigger hour_3if ( THIS_HOUR == 4 ) usetrigger hour_4if ( THIS_HOUR == 5 ) usetrigger hour_5if ( THIS_HOUR == 6 ) usetrigger hour_6 is_dawnif ( THIS_HOUR == 7 ) usetrigger hour_7if ( THIS_HOUR == 8 ) usetrigger hour_8if ( THIS_HOUR == 9 ) usetrigger hour_9if ( THIS_HOUR == 10 ) usetrigger hour_10if ( THIS_HOUR == 11 ) usetrigger hour_11if ( THIS_HOUR == 12 ) usetrigger hour_12if ( THIS_HOUR == 13 ) usetrigger hour_13if ( THIS_HOUR == 14 ) usetrigger hour_14if ( THIS_HOUR == 15 ) usetrigger hour_15if ( THIS_HOUR == 16 ) usetrigger hour_16if ( THIS_HOUR == 17 ) usetrigger hour_17 is_duskif ( THIS_HOUR == 18 ) usetrigger hour_18if ( THIS_HOUR == 19 ) usetrigger hour_19if ( THIS_HOUR == 20 ) usetrigger hour_20 is_nightif ( THIS_HOUR == 21 ) usetrigger hour_21if ( THIS_HOUR == 22 ) usetrigger hour_22if ( THIS_HOUR == 23 ) usetrigger hour_23setvarg LAST_HOUR THIS_HOUR } }{ event force_time if game.event.params >= 2mod PARAM1 24mod PARAM2 60callevent time_getsecondslocal local.mstime.secs global.mstime.secslocal l.secs $int(PARAM1)multiply l.secs 3600local l.mins_to_secs $int(PARAM2)multiply l.mins_to_secs 60add l.secs l.mins_to_secslocal l.daystart.secs global.mstime.secsdivide l.daystart.secs 86400setvard l.daystart.secs $int(l.daystart.secs)multiply l.daystart.secs 86400local l.timefromdaystart global.mstime.secssubtract l.timefromdaystart l.daystart.secsif( l.secs < l.timefromdaystart ) add l.secs 86400local l.newtime l.daystart.secsadd l.newtime l.secssetvarg global.mstime.secs l.newtimesetvarg global.mstime.updateall 0}